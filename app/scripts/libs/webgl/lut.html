<!DOCTYPE html>
<html lang="en">
<head>
  <title>Legende</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
</head>

<body>


  <div id="info"><a href="http://threejs.org" target="_blank">three.js</a> webgl - lookuptable - vertex color values from a range of data values.</br>
    press A: change color map, press S: change numberOfColors, press D: toggle Legend on/off, press F: change Legend layout</br>
  </div>

  <div id="container"></div>

  <script src="js/three.min.js"></script>
  <script src="js/Lut.js"></script>
  <script src="colorlegend.js"></script>
  <script src="js/Detector.js"></script>
  		<script src="js/TrackballControls.js"></script>
  <!--<script src="js/libs/stats.min.js"></script>-->

  <script>

  if ( ! Detector.webgl ) { Detector.addGetWebGLMessage(); }

  var container;
var trackballControls;
  var camera, scene, renderer, lut, legendLayout;

  var position;

  var mesh;

  var colorMap;
  var numberOfColors;

  init();
  animate();

  function init() {

    container = document.getElementById( 'container' );

    // SCENE
    scene = new THREE.Scene();

    // CAMERA
    camera = new THREE.PerspectiveCamera( 20, window.innerWidth / window.innerHeight, 1, 10000 );
    camera.name = 'camera';
    scene.add( camera );

    // LIGHT
    var ambientLight = new THREE.AmbientLight( 0x444444 );
    ambientLight.name = 'ambientLight';
    scene.add( ambientLight );

    colorMap = 'rainbow';
    numberOfColors = 512;

    legendLayout = 'vertical';

    //loadModel( colorMap, numberOfColors, legendLayout );
	var cL = new ColorLegend(1, 100);
    cL.draw(scene);
	
    camera.position.x = 17;
    camera.position.y = 9;
    camera.position.z = 32;


    renderer = new THREE.WebGLRenderer(  );
    renderer.setClearColor( 0xbdbdbd );
    renderer.setPixelRatio( window.devicePixelRatio );
    renderer.setSize(  window.innerWidth,  window.innerHeight );
    container.appendChild( renderer.domElement );

 //trackballControls = new THREE.TrackballControls(camera, renderer.domElement);
	
    //window.addEventListener( "keydown", onKeyDown, true);

  }


  function animate() {

    requestAnimationFrame( animate );
	renderer.render( scene, camera );

  }


/*
function cleanScene () {

  var elementsInTheScene = scene.children.length;

  for ( var i = elementsInTheScene-1; i > 0; i-- ) {

    if ( scene.children [ i ].name != 'camera' &&
    scene.children [ i ].name != 'ambientLight' &&
    scene.children [ i ].name != 'directionalLight') {

      scene.remove ( scene.children [ i ] );

    }

  }

}


function onKeyDown ( e ) {

  var maps = [ 'rainbow', 'cooltowarm', 'blackbody', 'grayscale' ];

  var colorNumbers = ['16', '128', '256', '512' ];

  if ( e.keyCode == 65 ) {

    cleanScene();

    var index = maps.indexOf( colorMap ) >= maps.length - 1 ? 0 : maps.indexOf( colorMap ) + 1;

    colorMap = maps [ index ];

    loadModel ( colorMap, numberOfColors, legendLayout );

  } else if ( e.keyCode == 83 ) {

    cleanScene();

    var index = colorNumbers.indexOf( numberOfColors ) >= colorNumbers.length - 1 ? 0 : colorNumbers.indexOf( numberOfColors ) + 1;

    numberOfColors = colorNumbers [ index ];

    loadModel ( colorMap ,  numberOfColors, legendLayout );

  } else if ( e.keyCode == 68 ) {

    if ( ! legendLayout ) {

      cleanScene();

      legendLayout = 'vertical';

      loadModel ( colorMap ,  numberOfColors, legendLayout );

    } else {

      cleanScene();

      legendLayout = lut.setLegendOff();

      loadModel ( colorMap ,  numberOfColors, legendLayout );

    }

  } 

}
*/
</script>

</body>
</html>